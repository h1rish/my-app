pipeline {
  agent any
  stages {
    stage('build') {
      steps {
        sh 'mvn clean package'
    
       }
     }
      stage('docker build') {
      steps {
        script{
          
          sh 'docker build . -t harishchow/hai:1.0'
          withCredentials([string(credentialsId: '123docker', variable: 'myvariable')]) {
            sh 'docker login -U harishchow -P $myvariable'
            sh 'docker push harishchow/hai:1.0'
        }
       }   
      }
    }
  }
}  
