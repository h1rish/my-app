pipeline {
  agent any
  stages {
    stage('hai') {
      steps {
        echo " Running ${JOB_NAME} ON ${JENKINS_URL} "
    
       }
     }
      stage('docker build') {
      steps {
        script{
          
          sh 'docker build . -t harishchow/hai:3.0'
          withCredentials([string(credentialsId: '123docker', variable: 'myvariable')]) {
            sh 'docker login -U harishchow -P $myvariable'
            sh 'docker push harishchow/hai:3.0'
        }
       }   
      }
    }
  }
}  
